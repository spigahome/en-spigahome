!function(e){"use strict";e("document").ready(function(){function l(){var l,t=e(".clever-lightbox-gallery-item.active");if(t.next("li").length)t.next("li").addClass("active"),l=t.index()+1;else if(e(".clever-lightbox-gallery-item:first-child").addClass("active"),l=0,!e(".clever-lightbox-gallery-item:first-child").has("img")[0]){var i=e(".clever-lightbox-gallery").children().eq(0);e(".clever-lightbox-gallery-item:first-child").append('<img src="'+i.find("a").attr("href")+'" alt="'+i.find("a").attr("title")+'" />')}var r=e(".clever-lightbox-gallery").children().eq(l).find("a");e(".clever-lb-gallery-count .current-item").text(l+1),t.removeClass("active"),a(r)}function t(){var l,t=e(".clever-lightbox-gallery-item.active");if(t.prev("li").length)t.prev("li").addClass("active"),l=t.index()-1;else if(e(".clever-lightbox-gallery-item:last-child").addClass("active"),l=parseInt(c-1),!e(".clever-lightbox-gallery-item:last-child").has("img")[0]){var i=e(".clever-lightbox-gallery").children().eq(parseInt(c-1));e(".clever-lightbox-gallery-item:last-child").append('<img src="'+i.find("a").attr("href")+'" alt="'+i.find("a").attr("title")+'" />')}var r=e(".clever-lightbox-gallery").children().eq(l).find("a");e(".clever-lb-gallery-count .current-item").text(l+1),t.removeClass("active"),a(r)}function a(l){var t=l;e(".clever-lightbox-gallery-item.active").imagesLoaded(function(){i(e(".clever-lightbox-gallery-item.active img").attr("src")),e(".clever-lightbox-gallery-item.active").next("li").length&&!e(".clever-lightbox-gallery-item.active").next("li").has("img")[0]&&e(".clever-lightbox-gallery-item.active").next("li").append('<img src="'+t.parent().next().find("a").attr("href")+'" alt="'+t.parent().next().find("a").attr("title")+'" />'),e(".clever-lightbox-gallery-item.active").prev("li").length&&!e(".clever-lightbox-gallery-item.active").prev("li").has("img")[0]&&e(".clever-lightbox-gallery-item.active").prev("li").append('<img src="'+t.parent().prev().find("a").attr("href")+'" alt="'+t.parent().prev().find("a").attr("title")+'" />')})}function i(l){var t,a,i,r,c,n=e(".clever-wrap-lightbox-gallery-block");r=.9*e(window).width(),c=.9*e(window).height(),e("<img>").attr("src",l).on("load",function(){t=this.height/this.width,this.height>c?(i=c,a=c/t):(i=this.height,a=i/t),a>r&&(a=r,i=r*t),n.height(i),n.width(a)})}if(e(".clever-lightbox-gallery")[0]){var r,c;c=e(".clever-lightbox-gallery").children().length,e(".clever-lightbox-gallery a").on("click",function(l){l.preventDefault();var t=e(this);if(r=e(this).parent().index(),e(".clever-wrap-lightbox-gallery")[0]){var i=e(".clever-lightbox-gallery-item:nth-child("+parseInt(r+1)+")");e(".clever-wrap-lightbox-gallery").addClass("active"),e(".clever-lightbox-gallery-item").removeClass("active"),i.addClass("active"),i.has("img")[0]||i.append('<img src="'+t.attr("href")+'" alt="'+t.attr("title")+'" />'),e(".clever-lb-gallery-count .current-item").text(r+1)}else{e("body").append('<div class="clever-wrap-lightbox-gallery active"><div class="clever-wrap-lightbox-gallery-block"><ul class="clever-lightbox-gallery-block"></ul></div><div class="cp-mask-close"></div><span class="clever-lb-close"><i class="cs-font clever-icon-close"></i> </span> </div> ');for(var n=0;c>n;n++)e(".clever-lightbox-gallery-block").append('<li class="clever-lightbox-gallery-item"></li>');c>1&&e(".clever-wrap-lightbox-gallery-block").prepend('<span class="clever-lb-gallery-nav clever-lb-prev-item"><i class="cs-font clever-icon-arrow-left-5"></i> </span> <span class="clever-lb-gallery-nav clever-lb-next-item"><i class="cs-font clever-icon-arrow-right-5"></i></span>'),e(".clever-lightbox-gallery-item:nth-child("+parseInt(r+1)+")").addClass("active").append('<img src="'+t.attr("href")+'" alt="'+t.attr("title")+'" />'),e(".clever-wrap-lightbox-gallery-block").append('<div class="clever-lb-gallery-count"><span class="current-item">'+parseInt(r+1)+"</span>/<span>"+c+"</span></div>")}a(t)}),e(document).on("click",".cp-mask-close",function(){e(".clever-wrap-lightbox-gallery").removeClass("active")}),e(document).on("click",".clever-lb-gallery-nav",function(){e(this).hasClass("clever-lb-next-item")?l():t()}),e(document).keyup(function(a){(39===a.keyCode||40===a.keyCode)&&l(),(37===a.keyCode||38===a.keyCode)&&t(),27===a.keyCode&&e(".clever-wrap-lightbox-gallery").removeClass("active")});var n;e(document).on("mousedown",".clever-wrap-lightbox-gallery-block",function(e){n=e.pageX}),e(document).on("mouseup",".clever-wrap-lightbox-gallery-block",function(e){0!=parseInt(n-e.pageX)&&(parseInt(n-e.pageX)>0?l():t())})}})}(jQuery);